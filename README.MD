<p align="left"><img src="logo.svg" width="320" align="right"/></p>

go2hx
==========
## Compiling Go libraries & code into Haxe
### [Targets](https://haxe.org/documentation/introduction/compiler-targets.html): Js, Lua, C#, C++, Java, C, Python

* Plug and play support for Haxe & Go.
* Human-like small generated output.
* Leverage Haxe libraries from Go (*coming soon*)



**warning:** *heavily experimental still a ways to go before an alpha*

# Getting started
* Download Golang [here](https://golang.org/dl/)
* Download lix with npm: ``npm install lix -g``
* Installing go2hx: ``lix install https://github.com/go2hx/go2hx --global``
* Building: ``lix run go2hx ./main.go`` or ``lix run go2hx github.com/tidwall/btree``

## Supported Spec

* defer
* slice append and slice/array/map indexing
* type switches and switches
* if statements, nill checks, equality, for loops, range
* interface{} and asserts
* field access, binary operators
* most number types
* pointers
* structs/interfaces/aliases*

### Standard library support

* a little os, fmt, reflect, time, math
* most of builtin

## Acknowledgement

A spiritual successor to Tardisgo written by [Elliott Stoneham](https://github.com/elliott5), The developer that has set the building blocks conceptually for this project, as well as a code contributor, with use of some of his code from Tardisgo.

## Code Overview

* The packages are generated by arguments and flags, and exported out from the Go side by json.
* The Haxe side then reads the exported data and begins typing up the data into TypeDefinitions, Fields, and Exprs.
* The types are generated into Haxe files.
* The generated code uses the stdgo package, that contains the basic types, builtin functions, and some macro magic.

## Components

* ``haxe build.hxml`` creates run.n a neko executable that holds the Haxe part of the compiler
* ``go build .`` creates go4hx executable that holds the Go part of the compiler, it is called from the Haxe side and has arguments passed to it, with its output being export.json

## Testing
* for testing [hashlink](https://github.com/HaxeFoundation/hashlink) virtual machine is required
* run ``haxe tests.hxml`` then ``hl tests.hl``, this will clone the go and tiny go repos and run their test suites.

## Inspiration
* Elliott5's [tardisgo](https://github.com/tardisgo/tardisgo) (Go to Haxe written in Go)
* Haxiomic's [dts2hx](https://github.com/haxiomic/dts2hx) (typescript defs to haxe externs)
* Alex's [formatter](https://github.com/HaxeCheckstyle/haxe-formatter) (Haxe code formatter)
* Simn's [hxparse](https://github.com/Simn/hxparse) and [haxeparser](https://github.com/Simn/haxeparser) (Haxe Lexer and Parser library)
* [gopherjs](https://github.com/gopherjs/gopherjs) (Go to Javascript compiler)